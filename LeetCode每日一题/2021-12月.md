(å¤–éƒ¨é“¾æ¥å»ºè®® æ–°æ ‡ç­¾é¡µæ‰“å¼€)

### Day 1. (17th)
[1518. æ¢é…’é—®é¢˜](https://leetcode-cn.com/problems/water-bottles/)

æ¨¡æ‹Ÿï¼Œ æ°´é¢˜

```C++
class Solution {
public:
    int numWaterBottles(int numBottles, int numExchange) {
        int result = numBottles;
        while(numBottles >= numExchange) {
            result += numBottles / numExchange;
            numBottles = numBottles / numExchange + numBottles % numExchange;
        }
        return result;
    }
};
```

æ—¶é—´å¤æ‚åº¦çº¦ä¸º O(lognumE(numB)), ç©ºé—´å¤æ‚åº¦O(1)

### Day 2. (18th)
[419. ç”²æ¿ä¸Šçš„æˆ˜èˆ°](https://leetcode-cn.com/problems/battleships-in-a-board/)

(è¿™é¢˜ä¸éš¾, ä½†è¯»æ‡‚é¢˜éš¾. å‡ºé¢˜äººå¥½åƒå¾ˆæ€•ä½ æŠŠé¢˜è¯»æ‡‚çš„æ ·å­.)

æ°´é¢˜, ä¸€æ¬¡éå†, æ±‚æˆ˜èˆ°æ•°å³æ±‚â€å·¦ä¸Šè§’â€œæ•°.  
```C++
class Solution {
public:
    int countBattleships(vector<vector<char>>& board) {
        int result = 0;
        int m = board.size(), n = board[0].size();
        for(int i=0; i<m; ++i) {
            for(int j=0; j<n; ++j) {
                if(board[i][j] == '.') continue;
                if(j > 0 && board[i][j-1] == 'X') continue;
                else if(i > 0 && board[i-1][j] == 'X') continue;
                else ++result; 
            }
        }
        return result;
    }
};
```
### Day 3. (19th)

[997. æ‰¾åˆ°å°é•‡çš„æ³•å®˜](https://leetcode-cn.com/problems/find-the-town-judge/)

æ°´é¢˜ï¼Œè€ƒå¯Ÿå›¾è®ºä¸­çš„å…¥åº¦å’Œå‡ºåº¦ï¼Œå®é™…ä¸Šä¸çŸ¥é“ä¹Ÿæ²¡å•¥å½±å“ã€‚

ä¸€æ¬¡éå†ç»Ÿè®¡å…¥åº¦ & å‡ºåº¦ï¼Œä¸€æ¬¡éå†åˆ¤æ–­â€œæ³•å®˜â€ã€‚

```C++
class Solution {
public:
    int findJudge(int n, vector<vector<int>>& trust) {
        vector<int> u(n+1, 0), v(n+1, 0);
        for(vector<int> i : trust) {
            ++u[i.front()];
            ++v[i.back()];
        }
        for(int i=1; i<=n; ++i) {
            if(u[i] == 0 && v[i] == n-1)
                return i;
        }
        return -1;
    }
};
```

### Day 4. (20th)

[475. ä¾›æš–å™¨](https://leetcode-cn.com/problems/heaters/comments/)

#### way 1. æ’åº + äºŒåˆ†æŸ¥æ‰¾ç­”æ¡ˆ

è€ƒè™‘äºŒåˆ†æŸ¥æ‰¾ç­”æ¡ˆï¼Œæœ€å°ä¸º l = 0ï¼Œæœ€å¤§ä¸è¶…è¿‡ r = max(max_houses, max_heaters).

1. é¦–å…ˆå°†houseså’Œheatersä»å°åˆ°å¤§æ’åº;
2. å– mid = l + (r-l)/2, h = 0, k = 0, å…¶ä¸­ mid è¡¨ç¤ºå¾…åˆ¤æ–­æ˜¯å¦å¯è¡Œçš„åŠå¾„ï¼Œhè¡¨ç¤ºå½“å‰houseï¼Œkè¡¨ç¤ºå½“å‰heater;
3. åˆ¤æ–­:
    * è‹¥å½“å‰houseå¤„äºå½“å‰headerçš„è¦†ç›–èŒƒå›´å†…ï¼Œå³ heaters[k] - mid <= houses[h] <= heaters[k] + midï¼Œåˆ™åˆ¤æ–­ä¸‹ä¸€ä¸ªhousesï¼Œ++h;
    * è‹¥å½“å‰houseå¤ªé å·¦ï¼Œå½“å‰heaterè¦†ç›–åœ¨å½“å‰åŠå¾„midä¸‹è¦†ç›–ä¸åˆ°ï¼Œå³houses[h] < heaters[k] - midï¼Œåˆ™éœ€è¦æ›´å¤§çš„åŠå¾„ï¼Œl = mid + 1 (å·¦è¾¹çš„heateréƒ½è¦†ç›–ä¸åˆ°ï¼Œå³è¾¹çš„æ›´åˆ«æƒ³äº†);
    * è‹¥å½“å‰houseå¤ªé å³ï¼Œå½“å‰heaterè¦†ç›–åœ¨å½“å‰åŠå¾„midä¸‹è¦†ç›–ä¸åˆ°ï¼Œå³houses[h] > heaters[k] + midï¼Œåˆ™å°è¯•ä¸‹ä¸€ä¸ªheaterï¼Œ++k, è‹¥å·²ç»æ˜¯æœ€åä¸€ä¸ªheaterï¼Œåˆ™éœ€è¦æ›´å¤§çš„åŠå¾„ï¼Œl = mid + 1.
4. å½“å‰åŠå¾„ä¸‹è‹¥èƒ½å…¨è¦†ç›–ï¼Œåˆ™å°è¯•æ›´å°çš„åŠå¾„ï¼Œr = mid

è¿™é‡Œwhile(l < r), ç¼©å°åŠå¾„æ—¶ r = mid è€Œé r = mid-1, åˆ™æœ€ç»ˆrå°±æ˜¯æ»¡è¶³æ¡ä»¶çš„æœ€å°åŠå¾„.
```C++
class Solution {
public:
    int findRadius(vector<int>& houses, vector<int>& heaters) {
        sort(houses.begin(), houses.end());
        sort(heaters.begin(), heaters.end());
        int l = 0, r = max(houses.back(), heaters.back());
        int result = r;
        while(l < r) {
            int k = 0;
            int mid = l + (r-l)/2;
            int h = 0;
            while(h < houses.size()) {
                if(houses[h] > heaters[k] + mid) {
                    ++k;
                    if(k >= heaters.size()) {
                        l = mid+1;
                        break;
                    }   
                } else if(houses[h] < heaters[k] - mid) {
                    l = mid+1;
                    break;
                } else
                    ++h;
            }
            if(h == houses.size()) {
                result = min(result, mid);
                r = mid;
            }
        }
        return r;
    }
};
```
m æ˜¯æ•°ç»„houses çš„é•¿åº¦ï¼Œn æ˜¯æ•°ç»„heaters çš„é•¿åº¦

æ—¶é—´å¤æ‚åº¦ï¼š O(nlogn + mlogm + (n+m)logmax(max_houses, max_heaters))

ç©ºé—´å¤æ‚åº¦ï¼š O(1)

![image](https://user-images.githubusercontent.com/49873642/146747023-15926673-7c4e-464b-ac18-5fa2be69e63e.png)

å—¯... ä¸å¤§è¡Œ

#### way 2. æ’åº + äºŒåˆ†æŸ¥æ‰¾heater

è‹¥æƒ³ç”¨æœ€å°åŠå¾„è¦†ç›–ä¸€ä¸ªæˆ¿å±‹ï¼Œè¦ä¹ˆç”¨è¯¥æˆ¿å±‹å·¦è¾¹ç¬¬ä¸€ä¸ªä¾›æš–å™¨ï¼Œè¦ä¹ˆå…¶å³è¾¹ç¬¬ä¸€ä¸ªä¾›æš–å™¨ã€‚

äºŒåˆ†æŸ¥æ‰¾æ¯ä¸ªhouseå·¦è¾¹ç¬¬ä¸€ä¸ªä¾›æš–å™¨k(heater <= house), åˆ™k+1å°±ä¸ºå…¶å³è¾¹ç¬¬ä¸€ä¸ªä¾›æš–å™¨; 

1. æ±‚æ¯ä¸ªæˆ¿å±‹æ®å·¦å³æœ€è¿‘ä¸¤ä¸ªä¾›æš–å™¨çš„æœ€è¿‘è·ç¦»;
2. æ±‚ä»¥ä¸Šæ‰€æœ‰æœ€è¿‘è·ç¦»çš„æœ€å¤§å€¼ã€‚

```C++
class Solution {
public:
    int findRadius(vector<int>& houses, vector<int>& heaters) {
        sort(heaters.begin(), heaters.end());
        int result = 0;
        for(int h : houses) {
            if(heaters.front() > h) {   // å¯èƒ½æœ€å·¦çš„ä¾›æš–å™¨ä¹Ÿåœ¨å…¶å³è¾¹
                result = max(result, heaters.front() - h);
                continue;
            }
            int l = 0, r = heaters.size()-1, mid, theLeft;
            while(l <= r) {
                mid = l + (r-l)/2;
                if(heaters[mid] > h) r = mid - 1;
                else if(heaters[mid] <= h) {
                    theLeft = mid;
                    l = mid+1;
                }
            }
            if(theLeft == heaters.size()-1)
                result = max(result, h - heaters[theLeft]);
            else
                result = max(result, min(h - heaters[theLeft], heaters[theLeft+1] - h));
        }
        return result;
    }
};
```

æ—¶é—´å¤æ‚åº¦ï¼š O(nlogn + mlogn) = O((n+m)logn)

ç©ºé—´å¤æ‚åº¦ï¼š O(1)

#### way 3. åŒæŒ‡é’ˆ

è‹¥houseså’Œheaterséƒ½æœ‰åºï¼Œå¯ä»¥è¯æ˜ï¼šè‹¥ç¦»ç¬¬iä¸ªhouseæœ€è¿‘çš„heaterä¸ºjï¼Œåˆ™ç¦»ç¬¬i+1ä¸ªhouseæœ€è¿‘çš„heaterå¿…ç„¶ >= j.

å› æ­¤åªè¦å…ˆå¯¹houseså’Œheatersæ’åºï¼Œç„¶ååŒæŒ‡é’ˆä¸€æ¬¡éå†å³å¯ã€‚

```C++
class Solution {
public:
    int findRadius(vector<int>& houses, vector<int>& heaters) {
        sort(heaters.begin(), heaters.end());
        sort(houses.begin(), houses.end());
        int result = 0;
        int i = 0, j = 0;
        while(i < houses.size()) {
            int dis = abs(heaters[j] - houses[i]);
            while(j+1 < heaters.size() && abs(heaters[j+1] - houses[i]) <= dis) {  // <= 
                ++j;
                dis = abs(heaters[j] - houses[i]);
            }
            if(dis != 0)
                return i;
            result = max(result, dis);
            ++i;
        }
        return result;
    }
};
```

éœ€è¦æ³¨æ„ï¼Œå†…å±‚whileåˆ¤æ–­ä½¿ç”¨ <=ï¼Œ æœ‰ä¸ªå‘ï¼šå¯èƒ½æœ‰å¤šä¸ªç”µçƒ­å™¨åœ¨åŒä¸€ä½ç½®ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š O(nlogn + mlogn + m + n) 

ç©ºé—´å¤æ‚åº¦ï¼š O(1)

æ—¶é—´ä¸»è¦èŠ±åœ¨æ’åºä¸Šï¼Œè‹¥æœ¬å°±æœ‰åºï¼Œåˆ™ä¸‹é™åˆ°çº¿æ€§æ—¶é—´å¤æ‚åº¦ã€‚

### Day 5. (21th)

[1154. ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©](https://leetcode-cn.com/problems/day-of-the-year/)

â›„â›„â›„ å†¬è‡³å¿«ä¹ï¼Œ åœ¨å¤–è¾¹ä¹Ÿè¦è®°å¾—åƒæ°´é¥ºå“¦. ğŸ¥ŸğŸ¥ŸğŸ¥Ÿ

```C++
class Solution {
public:
    int dayOfYear(string date) {
        int days[] = {0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
        int year = stoi(date.substr(0, 4));
        int month = stoi(date.substr(5, 2));
        int day = stoi(date.substr(8, 2));
        int result = 0;
        for(int i=1; i<month; ++i) result += days[i];
        result += day;
        if((year % 400 == 0 || (year % 4 == 0 && year % 100 != 0)) && month > 2) ++result;

        return result;
    }
};
```
### Day 6. (22th)

[686. é‡å¤å åŠ å­—ç¬¦ä¸²åŒ¹é…](https://leetcode-cn.com/problems/repeated-string-match/comments/)

é¦–å…ˆæ˜ç¡®ï¼Œè‹¥bé•¿åº¦ä¸ä¸º0ï¼Œåˆ™aè‡³å°‘é‡å¤1æ¬¡ï¼Œæœ€å¤šé‡å¤ int(len(b) / len(a)) + 2æ¬¡. 

æœ€å¤š: bçš„å¼€å¤´ç»“å°¾å„ç”¨açš„éƒ¨åˆ†ï¼Œä¸­é—´æœ€å¤šåŒ…å«int(len(b) / len(a))ä¸ªa.

ä½¿ç”¨**äºŒåˆ†æŸ¥æ‰¾ç­”æ¡ˆ**ï¼ŒKMPåˆ¤æ–­æ˜¯å¦å¯ä»¥åŒ¹é…ï¼Œ

```C++
class Solution {
public:
    int repeatedStringMatch(string a, string b) {
        if(b.size() == 0) return 0;
        int l = 1, r = b.size() / a.size() + 2 + 1;  // æœ€å¤š ~ +2æ¬¡, é¢å¤– +1 ä¸ºäº†æ–¹ä¾¿åˆ¤æ–­æ˜¯å¦æœ‰è§£
        while(l < r) {                              // O(logN)
            int mid = l + (r-l)/2;
            string t;
            for(int i=1; i<=mid; ++i) t += a;       // O(N*mid)
            if(t.find(b) != string::npos) r = mid;  // O(M+N)
            else l = mid+1;
        }
        return r == b.size() / a.size() + 2 + 1 ? -1 : r;
    }
};
```

æ—¶é—´å¤æ‚åº¦ï¼š O(NlogN)çº§åˆ«

## Day 7. (23th)

[1044. æœ€é•¿é‡å¤å­ä¸²](https://leetcode-cn.com/problems/longest-duplicate-substring/)

ç¬¬ä¸€æƒ³æ³•ï¼šä¸¤å±‚forï¼Œæšä¸¾å¯èƒ½å‡ºç°çš„æ‰€æœ‰å­—ä¸²ï¼Œå³å¯è·å¾—æœ€é•¿é‡å¤å­ä¸²ã€‚ æ—¶é—´å¤æ‚åº¦O(n^2)ï¼Œå¯¹äº n = 3e4ï¼Œå¿…ç„¶è¶…æ—¶.

ç¬¬äºŒæƒ³æ³•ï¼šé‡å¤å­ä¸²æœ€é•¿1ï¼Œæœ€çŸ­n-1ï¼ŒäºŒåˆ†æŸ¥æ‰¾ç­”æ¡ˆã€‚å…·ä½“åšæ³•ï¼š
```C++
æŸ¥æ‰¾æ‰€æœ‰é•¿åº¦ä¸ºmid = l + (r-l)/2 çš„å­ä¸²ï¼Œ
è‹¥æŸä¸ªå­ä¸²å‡ºç°æ¬¡æ•°>2ï¼Œåˆ™å­˜åœ¨é•¿åº¦ä¸ºmidçš„é‡å¤å­ä¸²ï¼Œæ¥ä¸‹æ¥å°è¯•å¯»æ‰¾æ›´é•¿çš„ï¼Œl = mid + 1;
å¦åˆ™ï¼Œr = mid - 1.

å®ç°ä»£ç :
string longestDupSubstring(string s) {
    int n = s.size();
    int l = 1, r = n - 1, mid;
    string result = "";
    while(l <= r) {
        set<string> uset;
        mid = l + (r-l)/2;
        for(int i = 0; i < n - mid + 1; ++i) {
            string t = s.substr(i, mid);
            if(uset.count(t)) {
                result = t;
                l = mid + 1;
                break;
            } 
            else uset.insert(t);
        }
        if(result.size() != mid) 
            r = mid-1;
    }
    return result;
}
äºŒåˆ†: O(logn)
å–å­ä¸²æ¬¡æ•°: n - mid;  O(n)
å–å­ä¸²: substr()  O(mid);
åˆ¤æ–­æ˜¯å¦å‡ºç°: unordered_set / set O(1);

æ—¶é—´å¤æ‚åº¦: < O(n^2logn)  
è¿™é‡Œmidç»Ÿä¸€æŒ‰ç…§nè®¡ç®—ï¼Œå®é™…ä¸Šå¹³å‡è¿œè¾¾ä¸åˆ°ç»™å‡ºçš„æ—¶é—´å¤æ‚åº¦ï¼Œä½†è¿˜æ˜¯ä¼šè¶…æ—¶
```

å–å­ä¸²å› ä¸ºè¦æ‰§è¡Œå­—ç¬¦æ‹·è´æ“ä½œï¼Œå› æ­¤æ—¶é—´å¼€é”€æ€»æ˜¯çº¿æ€§ã€‚è‹¥å°†æ­¤æ“ä½œæ—¶é—´ä¼˜åŒ–åˆ°å¸¸æ•°çº§åˆ«ï¼Œåˆ™ç®—æ³•æ•´ä½“æ—¶é—´å¤æ‚åº¦ä¸‹é™åˆ°O(nlogn). 

è§£å†³æ–¹æ³•ï¼š å­—ç¬¦ä¸²ç¼–ç . 

åªæœ‰å°å†™å­—æ¯ï¼Œå³æœ€å¤š26ä¸ªä¸åŒå­—ç¬¦ï¼Œå› æ­¤å¯ä»¥ç”¨ 0 - 25 çš„26è¿›åˆ¶æ•°æ¥è¡¨ç¤º a - z 26ä¸ªå­—ç¬¦.

æ¯”å¦‚å¯¹äºå­—ç¬¦ä¸²"abcdef"ä¸­çš„å­ä¸²"abc"ï¼Œ æˆ‘ä»¬å¯ä»¥è¡¨ç¤ºä¸º `encode = 0 * 26^2 + 1 * 26^1 + 2 * 26^0`ï¼Œ å½“å–ä¸‹ä¸€ä¸ªå­ä¸²"bcd"æ—¶ï¼Œåªéœ€è¦è®¡ç®—`(encode - 0 * 26^2) * 26 +  3 * 26^0)`;

ç»è¿‡ä¸Šè¿°ç¼–ç ï¼Œå–å­ä¸²æ“ä½œ(åŸä»£ç ä¸­ä¸ºsubstr()è¯­å¥)æ—¶é—´å¤æ‚åº¦ä¸‹é™åˆ°O(1)ï¼Œç®—æ³•æ•´ä½“å¤æ‚åº¦ä¸ºO(nlogn).

ä½†ä»å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œencodeå¯èƒ½è¶Šç•Œï¼Œå–æ¨¡å¯èƒ½å‘ç”Ÿâ€œç¢°æ’â€ï¼Œå³ä¸åŒencode mod ç»“æœç›¸åŒ.  å½“ç„¶å¯ä»¥ä½¿ç”¨å¤šä¸ªmod(å¤šä¸ªç¼–ç ï¼Œç›¸åŒmod P)ï¼Œä½†è¿™æ€»å½’æ˜¯ä¸ªæ¦‚ç‡é—®é¢˜ï¼Œä¸¥æ ¼è¯´ä¸æ˜¯ç¡®å®šæ€§ç®—æ³•.

**äºŒåˆ†æŸ¥æ‰¾ç­”æ¡ˆ + åˆ¤æ–­ï¼šæ»‘åŠ¨çª—å£ + å­—ç¬¦ä¸²ç¼–ç  + åŒå“ˆå¸Œ**
```C++
class Solution {
public:
    long long mod = 1000000006;
    long long fastPow(long long x, int y) {  // å¿«é€Ÿå¹‚
        long long  result = 1;
        while(y > 0) {
            if(y & 1) result = (result * x) % mod;
            x = (x * x) % mod;
            y >>= 1;
        }
        return result;
    } 
    string longestDupSubstring(string s) {
        int n = s.size();
        int l = 1, r = n - 1, mid;
        string result = "";
        int m1 = 26, m2 = 27;

        while(l <= r) {
            mid = l + (r-l)/2;
            unordered_set<long long> s1, s2;
            long long encode1 = 0, encode2 = 0;
            for(int i=0; i<mid; ++i) {
                encode1 = (encode1 + int(s[i]-'a') * fastPow(m1, mid-i-1)) % mod;
                encode2 = (encode2 + int(s[i]-'a') * fastPow(m2, mid-i-1)) % mod;
            }
            s1.insert(encode1);
            s2.insert(encode2);
            long long mm1 = fastPow(m1, mid-1), mm2 = fastPow(m2, mid-1);
            for(int i=1; i<n-mid+1; ++i) {
                encode1 -= (int(s[i-1] - 'a') * mm1) % mod;
                if(encode1 < 0) encode1 += mod;    // *************
                encode1 = (encode1 * m1) % mod;
                encode1 += int(s[i+mid-1] - 'a');
                encode2 -= (int(s[i-1] - 'a') * mm2) % mod;
                if(encode2 < 0) encode2 += mod;    // *************
                encode2 = (encode2 * m2) % mod;
                encode2 += int(s[i+mid-1] - 'a');
                if(s1.find(encode1) != s1.end() && s2.find(encode2) != s2.end()) {
                    result = s.substr(i, mid);
                    l = mid+1;
                    break;   
                }
                s1.insert(encode1);
                s2.insert(encode2);
            }
            if(result.size() != mid)
                r = mid-1;
        }
        return result;
    }
};
```
éœ€è¦æ³¨æ„çš„ä¸¤ä¸ªç‚¹:
1. nå¯èƒ½å¾ˆå¤§ï¼Œéœ€è¦ä½¿ç”¨å¿«é€Ÿå¹‚ï¼Œä¸”æ±‚å¹‚çš„è¿‡ç¨‹ä¸­å°±éœ€è¦mod
2. æ»‘åŠ¨çª—å£ï¼Œé¦–ä½ç§»å‡ºåšå‡æ³•åï¼Œencodeå¯èƒ½ä¼šå˜æˆè´Ÿæ•°ï¼Œè¿™ç§æƒ…å†µä¸‹éœ€è¦ + modçš„å€¼.

è¿™é¢˜ç¡®å®šæ€§è§£æ³•æ˜¯**åç¼€æ•°ç»„**ï¼Œ å“ï¼Œ ä¸‹æ¬¡ä¸€å®š.
